<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>vue3 | 码农必须冷静</title><meta name="author" content="kaka"><meta name="copyright" content="kaka"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="vue3新特性重写了数据双向绑定从v2.x的Object.defineProperty变成了proxy 解决掉的痛点：  可以直接监听整个对象，而不是某一个属性。(删除属性、新增属性) 可以监听数组的索引、length等。 省掉了for..in循环  123456789101112131415let obj &#x3D; &amp;#123;    name: &amp;#x27;xiao liu&amp;#x27;,    ag">
<meta property="og:type" content="article">
<meta property="og:title" content="vue3">
<meta property="og:url" content="http://movelovemovelove.github.io/2023/06/03/vue3/index.html">
<meta property="og:site_name" content="码农必须冷静">
<meta property="og:description" content="vue3新特性重写了数据双向绑定从v2.x的Object.defineProperty变成了proxy 解决掉的痛点：  可以直接监听整个对象，而不是某一个属性。(删除属性、新增属性) 可以监听数组的索引、length等。 省掉了for..in循环  123456789101112131415let obj &#x3D; &amp;#123;    name: &amp;#x27;xiao liu&amp;#x27;,    ag">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://movelovemovelove.github.io/img/portial.jpg">
<meta property="article:published_time" content="2023-06-03T14:54:05.000Z">
<meta property="article:modified_time" content="2023-06-04T02:07:38.124Z">
<meta property="article:author" content="kaka">
<meta property="article:tag" content="vue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://movelovemovelove.github.io/img/portial.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://movelovemovelove.github.io/2023/06/03/vue3/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'vue3',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-06-04 10:07:38'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = 'hidden';
    document.getElementById('loading-box').classList.remove("loaded")
  }
}

preloader.initLoading()
window.addEventListener('load',()=> { preloader.endLoading() })

if (false) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/portial.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="码农必须冷静"><span class="site-name">码农必须冷静</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">vue3</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-03T14:54:05.000Z" title="发表于 2023-06-03 22:54:05">2023-06-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-06-04T02:07:38.124Z" title="更新于 2023-06-04 10:07:38">2023-06-04</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="vue3"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><h1 id="vue3新特性"><a href="#vue3新特性" class="headerlink" title="vue3新特性"></a>vue3新特性</h1><h2 id="重写了数据双向绑定"><a href="#重写了数据双向绑定" class="headerlink" title="重写了数据双向绑定"></a>重写了数据双向绑定</h2><p>从v2.x的<code>Object.defineProperty</code>变成了<code>proxy</code></p>
<p>解决掉的痛点：</p>
<ol>
<li>可以直接监听整个对象，而不是某一个属性。(删除属性、新增属性)</li>
<li>可以监听数组的索引、length等。</li>
<li>省掉了<code>for..in</code>循环</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> obj = &#123;</span><br><span class="line">    name: <span class="string">&#x27;xiao liu&#x27;</span>,</span><br><span class="line">    age: 23</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">let</span> proxyObj = new Proxy(obj, &#123;</span><br><span class="line">    get(target, key)&#123;</span><br><span class="line">        console.log(target, key);</span><br><span class="line">        <span class="built_in">return</span> target[key]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">set</span>: <span class="keyword">function</span>(target, prop, value)&#123;</span><br><span class="line">        console.log(target, prop, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">console.log(proxyObj.name);</span><br><span class="line">proxyObj.age = 123</span><br></pre></td></tr></table></figure>

<h2 id="优化Vdom"><a href="#优化Vdom" class="headerlink" title="优化Vdom"></a>优化Vdom</h2><p>v2.x 是每次通过diff算法来更新。 v3.x则是通过<strong>对比有标记的</strong>, 减少非动态内容的消耗。</p>
<h2 id="fragment"><a href="#fragment" class="headerlink" title="fragment"></a>fragment</h2><p>支持了<strong>多根节点</strong>(vue自带使用fragment标签来渲染)</p>
<h2 id="setup语法糖"><a href="#setup语法糖" class="headerlink" title="setup语法糖"></a>setup语法糖</h2><h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h1><h2 id="nvm-amp-amp-nrm"><a href="#nvm-amp-amp-nrm" class="headerlink" title="nvm &amp;&amp; nrm"></a>nvm &amp;&amp; nrm</h2><p>nvm 版本管理node版本。</p>
<ol>
<li>nvm list </li>
<li>nvm install</li>
<li>nvm use xx.xx.xx</li>
</ol>
<p>nrm npm镜像源的管理工具</p>
<ol>
<li>npm install nrm -g</li>
<li>nrm ls</li>
<li>nrm use xx.</li>
</ol>
<h2 id="搭建"><a href="#搭建" class="headerlink" title="搭建"></a>搭建</h2><h4 id="使用vite搭建。"><a href="#使用vite搭建。" class="headerlink" title="使用vite搭建。"></a>使用vite搭建。</h4><ol>
<li>npm init vite@latest</li>
<li>Project-name:  <em>xxxx</em></li>
<li>选择框架 + js&#x2F;ts</li>
<li>cd <em>xxx</em></li>
<li>npm install </li>
<li>npm run dev</li>
</ol>
<h4 id="vue-x2F-cli"><a href="#vue-x2F-cli" class="headerlink" title="vue&#x2F;cli"></a>vue&#x2F;cli</h4><ol>
<li>npm init vue@latest</li>
<li>add Typescrpt :  Yes</li>
<li>JSX:  YE</li>
<li>router?: yes</li>
<li>pinia?: yes</li>
<li>vitest?: yes</li>
<li>cypress for end-to-end test?: yes</li>
<li>ESLint?: yes</li>
<li>code formatting? yes</li>
</ol>
<h4 id="node-js-源码"><a href="#node-js-源码" class="headerlink" title="node.js 源码"></a>node.js 源码</h4><p>libuv(跨平台的I&#x2F;O库)、V8、第三方库。</p>
<h2 id="vite目录-amp-amp-vscode插件"><a href="#vite目录-amp-amp-vscode插件" class="headerlink" title="vite目录 &amp;&amp; vscode插件"></a>vite目录 &amp;&amp; vscode插件</h2><p>目录会包含很多配置文件:</p>
<ol>
<li>tsconfig.json</li>
<li>tsconfig.node.json</li>
<li>vite.config.ts</li>
<li>vite-env.d.ts</li>
<li>main.ts</li>
</ol>
<p>vscode插件 需要禁用vue2的<code>vetur</code>插件 安装 vue3的 <code>volar</code>的 <code>vue languae feature</code>和<code>TypeScript Vue Plugin</code></p>
<h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><ol>
<li>v-text</li>
<li>v-html</li>
<li>v-if &amp;&amp; v-else &amp;&amp; v-else-if</li>
<li>v-show</li>
<li>v-on:<code>click</code>  &#x3D;&gt; @<code>click</code></li>
<li>v-bind:  &#x3D;&gt; <code>:</code></li>
<li>v-model</li>
<li>v-for</li>
<li>v-once</li>
<li>v-memo: (最小的性能优化)数组内定义的条件不变时候，则不会重新渲染。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-for=<span class="string">&quot;item in arr&quot;</span> :key=<span class="string">&quot;item&quot;</span> v-memo=<span class="string">&quot;[item]&quot;</span>&gt;</span><br><span class="line">  &#123;&#123; item  &#125;&#125;</span><br><span class="line">&lt;/div&gt;  </span><br></pre></td></tr></table></figure>

<h2 id="虚拟dom-amp-amp-diff算法"><a href="#虚拟dom-amp-amp-diff算法" class="headerlink" title="虚拟dom &amp;&amp; ?diff算法?"></a>虚拟dom &amp;&amp; ?diff算法?</h2><p>虚拟dom 就是对dom 的一种AST转换。 </p>
<h2 id="Ref全家桶"><a href="#Ref全家桶" class="headerlink" title="Ref全家桶"></a>Ref全家桶</h2><h4 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h4><p>将数据变成响应式。 </p>
<ol>
<li>通过引入<code>ref</code>调用包裹变成响应式。</li>
<li>通过<code>refx.value = 123</code>来进行修改</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> man:Ref&lt;M&gt; = ref(&#123; name: <span class="string">&#x27;liuxiao&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line">man.value.name = <span class="string">&#x27;xiaoliu25&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="isRef"><a href="#isRef" class="headerlink" title="isRef"></a>isRef</h4><p>调用查看是否为 ref数据</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(isRef(man))  //true</span><br></pre></td></tr></table></figure>

<h4 id="shallowRef"><a href="#shallowRef" class="headerlink" title="shallowRef"></a>shallowRef</h4><p>浅层次的数据响应。 </p>
<ol>
<li>改变<code>shallowRef.value</code>可以改变数据</li>
<li>修改<code>shallowRef.value.name=123</code>是不响应式的。</li>
<li>isRef()返回<code>true</code></li>
<li>不能与 <code>ref</code> 一起写， 会被影响更新。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> man2:ShallowRef&lt;M&gt; = shallowRef(&#123; name: <span class="string">&#x27;小刘是我&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line">// man2.value.name = <span class="string">&#x27;我不是小刘&#x27;</span>      // 视图不改变，数据改变</span><br><span class="line">man2.value = &#123;                        // 视图改变</span><br><span class="line">  name: <span class="string">&#x27;你怎么知道我是小刘&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> man1 = ref(&#123;name : 12&#125;)</span><br><span class="line"></span><br><span class="line">man1.value.name = 34 // 视图数据全部改变</span><br><span class="line">man2.value.name = 345 // 这里的shallowRef 也会被影响的更新了</span><br></pre></td></tr></table></figure>

<h4 id="triggerRef"><a href="#triggerRef" class="headerlink" title="triggerRef"></a>triggerRef</h4><p>这是强制视图更新的方法。 而 ref 底层其实是调用过这个方法。 所以 ref 和 shallowRef 不能一起使用。 会导致 shallowRef被强制更新视图。、</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> man2:ShallowRef&lt;M&gt; = shallowRef(&#123; name: <span class="string">&#x27;小刘是我&#x27;</span> &#125;)</span><br><span class="line">man2.value.name = <span class="string">&#x27;我不是小刘&#x27;</span> </span><br><span class="line">triggerRef(man2)  // 强制更新收集依赖。  // man2通过.value.name 也会更新视图</span><br></pre></td></tr></table></figure>

<h4 id="customRef"><a href="#customRef" class="headerlink" title="customRef"></a>customRef</h4><p>自定义ref。 – 浅层响应式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> MyRef&lt;T&gt;(value:T)&#123;</span><br><span class="line">    <span class="built_in">return</span> customRef( (track, trigger) =&gt;&#123; //  track 是收集依赖   trigger 是触发依赖</span><br><span class="line">      <span class="built_in">return</span> &#123;</span><br><span class="line">        <span class="function"><span class="title">get</span></span>()&#123;</span><br><span class="line">          track()</span><br><span class="line">          <span class="built_in">return</span> value</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="built_in">set</span>(newVal)&#123;</span><br><span class="line">          console.log(<span class="string">&#x27;我在这里调用了接口  实现了一些 操作 ---- 防抖节流等&#x27;</span>) // 每次都会调用</span><br><span class="line">          value = newVal</span><br><span class="line">          trigger()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">let</span> myObj = MyRef&lt;string&gt;(<span class="string">&#x27;xiaoshao&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  myObj.value = <span class="string">&#x27;我是 customRef ni&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="ref还是可以获取dom"><a href="#ref还是可以获取dom" class="headerlink" title="ref还是可以获取dom"></a>ref还是可以获取dom</h4><p>变量名字同 dom ref 的名字</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div ref=<span class="string">&quot;lx&quot;</span>&gt;</span><br><span class="line">    这是dom ref的内容</span><br><span class="line"> &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> lx = ref&lt;HTMLDivElement&gt;()</span><br><span class="line"></span><br><span class="line">  console.log(lx);   // ref类型dom</span><br><span class="line">  console.log(lx.value);  // dom本身</span><br><span class="line">  console.log(lx.value?.innerText); // dom的内容</span><br></pre></td></tr></table></figure>

<h4 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h4><ol>
<li>函数重载判断ref传入的值类型</li>
<li>如果不是ref对象，创建</li>
<li>isshallow判断 ，true 返回value，false 判断是否对象，是reactive 不是则返回value</li>
<li>customRef 重写 get set</li>
</ol>
<h2 id="reactive全家桶"><a href="#reactive全家桶" class="headerlink" title="reactive全家桶"></a>reactive全家桶</h2><ol>
<li>reactive只支持引用数据类型。</li>
<li>reactive不需要<code>.value</code>取值</li>
</ol>
<p>数组直接赋值会破坏响应式结构。 解决办法： </p>
<ol>
<li>对象包裹</li>
<li>变异方法(push+解构赋值)</li>
</ol>
<h4 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a>readonly</h4><p>把数据变成只读属性，自身不可改变。  但是依赖的初始值发生改变，readonly也会发生改变</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> arr = reactive&lt;number[]&gt;([1,2,3,4,5,6,8,8,4,3,2,2,2,34,532,523,423,234,2344])</span><br><span class="line"> <span class="built_in">let</span> a = <span class="built_in">readonly</span>(arr)</span><br></pre></td></tr></table></figure>

<h4 id="shallowReactive"><a href="#shallowReactive" class="headerlink" title="shallowReactive"></a>shallowReactive</h4><p>同<code>shallowRef</code>。 响应式层次直到 第一层属性值 可以响应。</p>
<p>shallowReactive 和 reactive 也会冲突，互相影响。强制更新。</p>
<h2 id="toXXX系列全家桶"><a href="#toXXX系列全家桶" class="headerlink" title="toXXX系列全家桶"></a>toXXX系列全家桶</h2><h4 id="toRef"><a href="#toRef" class="headerlink" title="toRef"></a>toRef</h4><p>基于响应式对象的一个属性，创建一个 对应的ref。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const man = reactive(&#123;name:<span class="string">&#x27;liuxiao&#x27;</span>,sex: <span class="string">&#x27;man&#x27;</span>&#125;)</span><br><span class="line"> const sex = toRef(man, <span class="string">&#x27;sex&#x27;</span>)</span><br><span class="line"> const change = () =&gt;&#123;</span><br><span class="line">   sex.value = <span class="string">&#x27;woman&#x27;</span></span><br><span class="line">   console.log(man);   // sex: woman  且更新视图</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="toRefs"><a href="#toRefs" class="headerlink" title="toRefs"></a>toRefs</h4><p>适用于<strong>解构</strong>一个<code>reactive</code>响应式对象，解构出来的属性都是响应式的。</p>
<p><strong>如果需要为响应式源对象 未来不存在的属性增加响应式(创建ref)，推荐使用 <code>toRef</code></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const man = reactive(&#123;</span><br><span class="line">    name:<span class="string">&#x27;liuxiao&#x27;</span>,</span><br><span class="line">    sex: <span class="string">&#x27;man&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">let</span> &#123; name, sex &#125; = toRefs(man)</span><br><span class="line">  <span class="keyword">function</span> <span class="function"><span class="title">change</span></span>()&#123;</span><br><span class="line">    name.value = <span class="string">&#x27;qiqiqiqiqiqiq&#x27;</span></span><br><span class="line">    sex.value = <span class="string">&#x27;woman Or man ? &#x27;</span></span><br><span class="line">    console.log(name, sex, man);  // man 包括name、sex 全部发生改变</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="toRaw"><a href="#toRaw" class="headerlink" title="toRaw"></a>toRaw</h4><p>获取 代理对象的 初始对象— 也就是 不是代理的源对象。   不会进行代理访问、追踪开销。</p>
<h2 id="computed"><a href="#computed" class="headerlink" title="computed"></a>computed</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const fullName = computed(() =&gt;&#123;</span><br><span class="line">  return &#x27;我叫&#x27; + name.name + &#x27;,  今年我&#x27; + name.age + &#x27;了&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">const fullName2 = computed(&#123;</span><br><span class="line">  get()&#123;</span><br><span class="line">    return &#x27;我叫&#x27; + name.name + &#x27;,  今年我&#x27; + name.age + &#x27;了&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  set()&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="侦听器"><a href="#侦听器" class="headerlink" title="侦听器"></a>侦听器</h2><p>数组包裹也是可以监听多个。 </p>
<p>第一个参数为监听对象，第二个参数为<code>callback</code>，第三个参数是<code>&#123; deep: true, immediate:true, flush: &#39;pre/sync/post&#39; 更新前、同步、更新后执行 &#125;</code></p>
<p><code>reactive</code>默认监听是开启了<code>deep:true</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> age1 = ref&lt;number&gt;(10)</span><br><span class="line"><span class="built_in">let</span> age2 = ref&lt;number&gt;(100)</span><br><span class="line">watch([age1, age2], (newVal, oldVal) =&gt;&#123;</span><br><span class="line"> console.log(newVal,oldVal);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>监听reactive单个属性，第一个参数可以设置为函数，返回监听的单个属性。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">watch(() =&gt; obj.name, (newVal,oldVal) =&gt;&#123;</span><br><span class="line">  console.log(newVal,oldVal);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="watchEffect"><a href="#watchEffect" class="headerlink" title="watchEffect"></a>watchEffect</h2><p>初次进入页面就会调用。</p>
<p>代码赋值给一个变量，通过调用是可以停掉监听。</p>
<p>第一个参数为<code>callback</code>, 副作用清除。 会在下次执行前调用。</p>
<p>第二个参数是<code>options</code>, 包含 flush、onTrigger()触发依赖、onTrack()收集依赖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const stop = watchEffect( (onClearup) =&gt;&#123;</span><br><span class="line">  // 想要监听  直接在这里写就可以</span><br><span class="line">  console.log(name, sex);</span><br><span class="line">  onClearup(() =&gt;&#123;</span><br><span class="line">    console.log(&#x27;副作用清除&#x27;);  // 先执行这个 再去执行监听操作</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,&#123;</span><br><span class="line">  flush: &#x27;pre/post/sync&#x27;,</span><br><span class="line">  onTrack(e)&#123;</span><br><span class="line">    debugger</span><br><span class="line">    &#125;,</span><br><span class="line">  onTrigger(e)&#123;</span><br><span class="line">    debugger</span><br><span class="line">  &#125; </span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">const clickCb = () =&gt;&#123;</span><br><span class="line">  stop() // 停用侦听器</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>setup语法糖取消<code>beforeCreate</code>和<code>created</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">console.log(<span class="string">&#x27;setup&#x27;</span>);</span><br><span class="line">onBeforeMount(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;onBeforeMount&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;onMounted&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line">onBeforeUpdate(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;onBeforeUpdate&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line">onUpdated(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;onUpdated&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line">onBeforeUnmount(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;onBeforeUnmount&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line">onUnmounted(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;onUnmounted&#x27;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="父子组件传参"><a href="#父子组件传参" class="headerlink" title="父子组件传参"></a>父子组件传参</h2><h4 id="defineProps-父-x3D-gt-子"><a href="#defineProps-父-x3D-gt-子" class="headerlink" title="defineProps(父&#x3D;&gt;子)"></a>defineProps(父&#x3D;&gt;子)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=<span class="string">&#x27;ts&#x27;</span>&gt;</span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">    na:&#123;</span><br><span class="line">        <span class="built_in">type</span>:String,</span><br><span class="line">        default: <span class="string">&#x27;你好&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    arr: Array</span><br><span class="line">&#125;)</span><br><span class="line">console.log(props.na);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>配合ts使用：   </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const props = defineProps&lt;&#123;</span><br><span class="line">    na:string,</span><br><span class="line">    arr:number[]</span><br><span class="line">&#125;&gt;()</span><br><span class="line">console.log(props.na);</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">只有使用ts才可以使用的 定义默认值</span><br><span class="line"></span><br><span class="line">``` bash</span><br><span class="line">const props = withDefaults(defineProps&lt;&#123;</span><br><span class="line">    na:string,</span><br><span class="line">    arr:number[]</span><br><span class="line">&#125;&gt;(),&#123;</span><br><span class="line">    na: <span class="string">&#x27;liuxiao&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="defineEmits-子-x3D-gt-父"><a href="#defineEmits-子-x3D-gt-父" class="headerlink" title="defineEmits(子 &#x3D;&gt;父)"></a>defineEmits(子 &#x3D;&gt;父)</h4><p>第一种是:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const emits = defineEmits([<span class="string">&#x27;giveP&#x27;</span>])</span><br><span class="line">const send = () =&gt;&#123;</span><br><span class="line">    emits(<span class="string">&#x27;giveP&#x27;</span>, &#123;</span><br><span class="line">        name: <span class="string">&#x27;liuxiao&#x27;</span>,</span><br><span class="line">        age: 26</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;A @give-p=<span class="string">&quot;ppp&quot;</span>&gt;&lt;/A&gt;</span><br></pre></td></tr></table></figure>

<p>第二种使用ts则是如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const emits = defineEmits&lt;&#123;</span><br><span class="line">    (e: <span class="string">&#x27;giveP&#x27;</span>, message:&#123;name:string,age:number&#125;):void</span><br><span class="line">&#125;&gt;()</span><br></pre></td></tr></table></figure>

<h4 id="defineExpose-子-x3D-gt-父"><a href="#defineExpose-子-x3D-gt-父" class="headerlink" title="defineExpose(子 &#x3D;&gt; 父)"></a>defineExpose(子 &#x3D;&gt; 父)</h4><p>应用场景可以包含： 组件库的内部方法暴露出来 外部使用(form表单等组件库的预校验)。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;A ref=<span class="string">&quot;Aa&quot;</span>&gt;&lt;/A&gt;</span><br><span class="line"></span><br><span class="line">import A from <span class="string">&#x27;./components/A.vue&#x27;</span>;</span><br><span class="line">const Aa = ref&lt;InstanceType&lt;typeof A&gt;&gt;()</span><br><span class="line">onMounted(() =&gt;&#123;</span><br><span class="line">  console.log(  Aa.value?.name);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">defineExpose(&#123;</span><br><span class="line">    name: &#x27;liuxiao&#x27;,</span><br><span class="line">    age: <span class="number">123</span>,</span><br><span class="line">    nihao()&#123;</span><br><span class="line">        console.log(<span class="number">123</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import A from <span class="string">&#x27;./components/A.vue&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h4 id="全局组件"><a href="#全局组件" class="headerlink" title="全局组件"></a>全局组件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> const app = createApp(App)</span><br><span class="line"></span><br><span class="line">import A from <span class="string">&#x27;./components/A.vue&#x27;</span></span><br><span class="line">app.component(<span class="string">&#x27;A&#x27;</span>, A)</span><br></pre></td></tr></table></figure>

<h4 id="递归组件"><a href="#递归组件" class="headerlink" title="递归组件"></a>递归组件</h4><p>组件自己使用自己：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ tree.vue</span><br><span class="line"></span><br><span class="line">&lt;div class=<span class="string">&#x27;wrapper&#x27;</span>&gt;</span><br><span class="line">  &lt;div class=<span class="string">&quot;item&quot;</span> v-for=<span class="string">&quot;item in data&quot;</span> :key=<span class="string">&quot;item.name&quot;</span>&gt;</span><br><span class="line">    &lt;input <span class="built_in">type</span>=<span class="string">&quot;checkbox&quot;</span> v-model=<span class="string">&quot;item.checked&quot;</span>&gt; &#123;&#123; item.name &#125;&#125;</span><br><span class="line">    &lt;Tree :data=<span class="string">&quot;item.children&quot;</span> v-if=<span class="string">&quot;item?.children?.length&quot;</span>&gt;&lt;/Tree&gt;   &lt;-- 自己调用自己 --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>如果想要改名可以：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ tree.vue</span><br><span class="line"></span><br><span class="line">&lt;div class=<span class="string">&#x27;wrapper&#x27;</span>&gt;</span><br><span class="line">  &lt;div class=<span class="string">&quot;item&quot;</span> v-for=<span class="string">&quot;item in data&quot;</span> :key=<span class="string">&quot;item.name&quot;</span>&gt;</span><br><span class="line">    &lt;input <span class="built_in">type</span>=<span class="string">&quot;checkbox&quot;</span> v-model=<span class="string">&quot;item.checked&quot;</span>&gt; &#123;&#123; item.name &#125;&#125;</span><br><span class="line">    &lt;lx :data=<span class="string">&quot;item.children&quot;</span> v-if=<span class="string">&quot;item?.children?.length&quot;</span>&gt;&lt;/lx&gt;   &lt;-- 自己调用自己 --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=<span class="string">&quot;ts&quot;</span>&gt;</span><br><span class="line"><span class="built_in">export</span> default &#123;</span><br><span class="line">  name: <span class="string">&#x27;lx&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>改名也可以：</p>
<p>安装 <code>unplugin-vue-define-options</code></p>
<h4 id="动态组件"><a href="#动态组件" class="headerlink" title="动态组件"></a>动态组件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;component :is=<span class="string">&quot;comNm&quot;</span>&gt;&lt;/component&gt;</span><br></pre></td></tr></table></figure>

<h4 id="另类动态组件"><a href="#另类动态组件" class="headerlink" title="另类动态组件"></a>另类动态组件</h4><p>vue2风格的 首先components对象注册，然后全部替换为字符串</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> default &#123;</span><br><span class="line">  components:&#123;</span><br><span class="line">    A,</span><br><span class="line">    Tree</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h4><p>上述操作会给出一个警告。 我们不需要代理他的响应式。 可以使用markRow和 shallowRef</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const comNm = shallowRef(A)</span><br><span class="line"></span><br><span class="line">obj = &#123;</span><br><span class="line">  com: markRaw(Tree)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h4><p>父组件: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;A&gt;</span><br><span class="line">  &lt;template <span class="comment">#header=&quot;dataObj&quot;&gt; // 插槽作用域</span></span><br><span class="line">    这是头部</span><br><span class="line">    &#123;&#123; dataObj.data &#125;&#125;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  &lt;template <span class="comment">#default&gt;</span></span><br><span class="line">    你好，我是你爹</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  &lt;template <span class="comment">#[slotName]&gt; //动态插槽</span></span><br><span class="line">    你好，我是你爹</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/A&gt;</span><br><span class="line"></span><br><span class="line">import A from <span class="string">&#x27;./components/A.vue&#x27;</span>;</span><br><span class="line">const slotName = ref&lt;string&gt;(<span class="string">&#x27;footer&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>子组件: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;header class=<span class="string">&quot;h&quot;</span>&gt;</span><br><span class="line">    &lt;slot name=<span class="string">&quot;header&quot;</span> :data=<span class="string">&quot;data&quot;</span>&gt;&lt;/slot&gt; // 具名插槽</span><br><span class="line">&lt;/header&gt;</span><br><span class="line">&lt;main class=<span class="string">&quot;m&quot;</span>&gt;</span><br><span class="line">     &lt;slot&gt;&lt;/slot&gt;  // 匿名插槽</span><br><span class="line">&lt;/main&gt;</span><br><span class="line">&lt;footer class=<span class="string">&quot;f&quot;</span>&gt;</span><br><span class="line">    &lt;slot name=<span class="string">&quot;footer&quot;</span>&gt;</span><br><span class="line">        这是插槽默认值</span><br><span class="line">    &lt;/slot&gt;</span><br><span class="line">&lt;/footer&gt;</span><br><span class="line"></span><br><span class="line"><span class="built_in">type</span> names = &#123;</span><br><span class="line">        name:string</span><br><span class="line">        age:number</span><br><span class="line">    &#125;</span><br><span class="line">    const data = reactive&lt;names[]&gt;(</span><br><span class="line">        [</span><br><span class="line">            &#123;</span><br><span class="line">                name: <span class="string">&#x27;这里是数据1&#x27;</span>,</span><br><span class="line">                age: 23</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                name: <span class="string">&#x27;这里是数据2&#x27;</span>,</span><br><span class="line">                age: 30</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                name: <span class="string">&#x27;这里是数据3&#x27;</span>,</span><br><span class="line">                age: 55</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<h4 id="异步suspense"><a href="#异步suspense" class="headerlink" title="异步suspense"></a>异步suspense</h4><p>异步组件使用:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const SyncVue = defineAsyncComponent( () =&gt; import(<span class="string">&#x27;./components/A.vue&#x27;</span>))</span><br><span class="line"></span><br><span class="line">const SyncVue = defineAsyncComponent( &#123;</span><br><span class="line">  loadingComponent: () =&gt; import(<span class="string">&#x27;./components/A.vue&#x27;</span>),</span><br><span class="line">  errorComponent: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="built_in">timeout</span>: 23,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>异步组件好处是代码分包</strong></p>
<p>build dist时候 import 并不会分开打包。 异步组件代码分包会把 import 没有使用的打包成不同的包。</p>
<h4 id="teleport-传送组件"><a href="#teleport-传送组件" class="headerlink" title="teleport 传送组件"></a>teleport 传送组件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Teleport to=<span class="string">&quot;body&quot;</span> :disabled=<span class="string">&quot;false&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/Teleport&gt;</span><br></pre></td></tr></table></figure>

<p>disabled 可以控制是不是传送走。  false的是可以的，默认值是false</p>
<h4 id="keep-alive组件"><a href="#keep-alive组件" class="headerlink" title="keep-alive组件"></a>keep-alive组件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive include=<span class="string">&quot;&quot;</span> exclude=<span class="string">&quot;&quot;</span> :max=<span class="string">&quot;10&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure>

<p>include决定缓存那些组件， exclude决定不缓存哪些组件， max决定最大缓存实例数。</p>
<p>属性值可以是字符串逗号分割、可以是正则表达式、可以是前两种数组。</p>
<p><strong>只可以有一个子节点。</strong></p>
<h4 id="新的生命周期"><a href="#新的生命周期" class="headerlink" title="新的生命周期"></a>新的生命周期</h4><p>activated 和 deactivated</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> default &#123;</span><br><span class="line">  <span class="function"><span class="title">activated</span></span>() &#123;</span><br><span class="line">    // 在首次挂载、</span><br><span class="line">    // 以及每次从缓存中被重新插入的时候调用</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">deactivated</span></span>() &#123;</span><br><span class="line">    // 在从 DOM 上移除、进入缓存</span><br><span class="line">    // 以及组件卸载时调用</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="provide-inject"><a href="#provide-inject" class="headerlink" title="provide-inject"></a>provide-inject</h4><p>依赖提供 和 依赖注入。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const age = ref&lt;number&gt;(10)</span><br><span class="line">provide(<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;你好&#x27;</span>)</span><br><span class="line">provide(<span class="string">&#x27;age&#x27;</span>, <span class="built_in">readonly</span>(age))  // 子组件不能修改</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> age = inject(<span class="string">&#x27;age&#x27;</span>)</span><br><span class="line"><span class="built_in">let</span> A = inject(<span class="string">&#x27;A&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>是利用<code>Object.create()</code> 进行一个原型链</p>
<h4 id="兄弟组件传参-bus"><a href="#兄弟组件传参-bus" class="headerlink" title="兄弟组件传参 bus"></a>兄弟组件传参 bus</h4><p>手写的bus总线</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span> TbusClass = &#123;</span><br><span class="line">    emit: (name:string)=&gt;void</span><br><span class="line">    on: (name:string, callback:Function)=&gt;void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">type</span> TparamsKey = string | number | symbol</span><br><span class="line"></span><br><span class="line"><span class="built_in">type</span> Tlist = &#123;</span><br><span class="line">    [key:TparamsKey]:Array&lt;Function&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Bus implements TbusClass &#123;</span><br><span class="line">    list: Tlist</span><br><span class="line">    <span class="function"><span class="title">constructor</span></span>()&#123;</span><br><span class="line">        this.list = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    emit(name:string, ...args:Array&lt;any&gt;)&#123;</span><br><span class="line">        <span class="built_in">let</span> eName:Array&lt;Function&gt; = this.list[name]</span><br><span class="line">        eName.forEach( v =&gt;&#123;</span><br><span class="line">            v.apply(this, args)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    on(name:string, callback:Function)&#123;</span><br><span class="line">        <span class="built_in">let</span> fn:Array&lt;Function&gt; = this.list[name] || []</span><br><span class="line">        fn.push(callback)</span><br><span class="line">        this.list[name] = fn</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> default new Bus()</span><br></pre></td></tr></table></figure>

<h4 id="mitt-vue3的bus总线库"><a href="#mitt-vue3的bus总线库" class="headerlink" title="mitt(vue3的bus总线库)"></a>mitt(vue3的bus总线库)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">npm i mitt -s</span><br><span class="line"></span><br><span class="line">const emitter = mitt()</span><br><span class="line"></span><br><span class="line"><span class="built_in">declare</span> module <span class="string">&#x27;vue&#x27;</span> &#123;</span><br><span class="line">    <span class="built_in">export</span> interface ComponentCustomProperties &#123;</span><br><span class="line">        <span class="variable">$bus</span>: typeof emitter</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">app.config.globalProperties.<span class="variable">$bus</span> = emitter</span><br><span class="line"></span><br><span class="line">// A.vue</span><br><span class="line"></span><br><span class="line">import &#123; getCurrentInstance &#125; from <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line">const instance = getCurrentInstance()</span><br><span class="line"><span class="built_in">let</span> a = <span class="literal">false</span></span><br><span class="line">const change = () =&gt;&#123;</span><br><span class="line">    a = !a</span><br><span class="line">    instance?.proxy?.<span class="variable">$bus</span>.emit(<span class="string">&#x27;lx&#x27;</span>, a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// B.vue</span><br><span class="line">const instance = getCurrentInstance()</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> nm = ref&lt;boolean&gt;(<span class="literal">false</span>)</span><br><span class="line">instance?.proxy?.<span class="variable">$bus</span>.on(<span class="string">&#x27;lx&#x27;</span>, (value: any) =&gt;&#123;</span><br><span class="line">    nm.value = value</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="TSX"><a href="#TSX" class="headerlink" title="TSX"></a>TSX</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">npm install @vitejs/plugin-vue-jsx -D </span><br><span class="line"></span><br><span class="line">// $ vite.config.ts</span><br><span class="line"></span><br><span class="line">import vueJsx from <span class="string">&#x27;@vitejs/plugin-vue-jsx&#x27;</span></span><br><span class="line"></span><br><span class="line">// https://vitejs.dev/config/</span><br><span class="line"><span class="built_in">export</span> default defineConfig(&#123;</span><br><span class="line"> plugins: [vue(), vueJsx()],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="第一种返回函数"><a href="#第一种返回函数" class="headerlink" title="第一种返回函数"></a>第一种返回函数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// App.tsx</span><br><span class="line"><span class="built_in">export</span> default <span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">   <span class="built_in">return</span> (&lt;div&gt;你好&lt;/div&gt;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// App.vue</span><br><span class="line"></span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;liuxiao&gt;&lt;/liuxiao&gt;</span><br><span class="line"> &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">import liuxiao from <span class="string">&#x27;../App&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="引入defineComponent选项api"><a href="#引入defineComponent选项api" class="headerlink" title="引入defineComponent选项api"></a>引入defineComponent选项api</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineComponent &#125; from <span class="string">&quot;vue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default defineComponent(&#123;</span><br><span class="line">    <span class="function"><span class="title">data</span></span>()&#123;</span><br><span class="line">        <span class="built_in">return</span> &#123;</span><br><span class="line">            name: <span class="string">&#x27;刘潇&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">render</span></span>()&#123;</span><br><span class="line">        <span class="built_in">return</span> (</span><br><span class="line">            &lt;div&gt;&#123;this.name&#125;&lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="引入defineComponent使用setup"><a href="#引入defineComponent使用setup" class="headerlink" title="引入defineComponent使用setup"></a>引入defineComponent使用setup</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineComponent &#125; from <span class="string">&quot;vue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default defineComponent(&#123;</span><br><span class="line">    setup(props, ctx) &#123;</span><br><span class="line">        <span class="built_in">return</span> () =&gt;&#123;</span><br><span class="line">            <span class="built_in">return</span> (&lt;div&gt;我是你爹&lt;/div&gt;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h2><p>默认值： vue2是value  vue3是 modelValue<br>事件： vue2是input    vue3是 ‘update:modelValue’<br>新增支持多个v-model<br>新增支持自定义Modifiers修饰符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// <span class="variable">$app</span>.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;父组件&lt;/div&gt;</span><br><span class="line">    show: -- &#123;&#123; show &#125;&#125;</span><br><span class="line">    ageValue: -- &#123;&#123; ageValue &#125;&#125;</span><br><span class="line">    &lt;button @click=<span class="string">&quot;changeShow&quot;</span>&gt;决定子组件是否存在&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">     &lt;A v-model:ageValue.modifiers=<span class="string">&quot;ageValue&quot;</span> v-model=<span class="string">&quot;show&quot;</span>&gt;&lt;/A&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=<span class="string">&#x27;ts&#x27;</span>&gt;</span><br><span class="line">import &#123; ref &#125; from <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line">import A from <span class="string">&#x27;./components/A.vue&#x27;</span>;</span><br><span class="line"><span class="built_in">let</span> show = ref&lt;boolean&gt;(<span class="literal">true</span>)</span><br><span class="line"><span class="built_in">let</span> ageValue = ref&lt;string&gt;(<span class="string">&#x27;23&#x27;</span>)</span><br><span class="line">const changeShow = <span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">  show.value = !show.value</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// A.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div v-if=<span class="string">&quot;modelValue&quot;</span> class=<span class="string">&#x27;wrapper&#x27;</span>&gt;</span><br><span class="line">        &lt;button @click=<span class="string">&quot;change&quot;</span>&gt;点击隐藏子组件&lt;/button&gt;</span><br><span class="line">        &lt;input <span class="built_in">type</span>=<span class="string">&quot;text&quot;</span> :value=<span class="string">&quot;ageValue&quot;</span> @input=<span class="string">&quot;inputChange&quot;</span>&gt;</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            show: --- &#123;&#123; modelValue &#125;&#125;</span><br><span class="line">            ageValue: -- &#123;&#123; ageValue &#125;&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=<span class="string">&#x27;ts&#x27;</span>&gt;</span><br><span class="line">const props = defineProps&lt;&#123;</span><br><span class="line">    modelValue:boolean</span><br><span class="line">    ageValue:string</span><br><span class="line">    ageValueModifiers?:&#123;</span><br><span class="line">        modifiers?:boolean</span><br><span class="line">    &#125;</span><br><span class="line">&#125;&gt;()</span><br><span class="line">const emits = defineEmits([<span class="string">&#x27;update:modelValue&#x27;</span>,<span class="string">&#x27;update:ageValue&#x27;</span>])</span><br><span class="line"></span><br><span class="line">const change = () =&gt;&#123;</span><br><span class="line">    emits(<span class="string">&#x27;update:modelValue&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br><span class="line">const inputChange = (event:Event) =&gt;&#123;</span><br><span class="line">    const target = event.target as HTMLInputElement</span><br><span class="line">    emits(<span class="string">&#x27;update:ageValue&#x27;</span>, target.value)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h2><h4 id="vue2和3的区别"><a href="#vue2和3的区别" class="headerlink" title="vue2和3的区别"></a>vue2和3的区别</h4><p>vue3: </p>
<ol>
<li>created: 元素初始化</li>
<li>beforeMount: 指令绑定到元素调用。 只调用一次</li>
<li>mounted： 插入父级dom调用</li>
<li>beforeUpdate： 被更新之前</li>
<li>updated</li>
<li>beforeUnmount： 元素被移除之前</li>
<li>unMounted： 指令被移除调用，只调用一次。</li>
</ol>
<p>vue2：</p>
<p>bind inserted update componentUpdated unbind</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;A v-move:liuxiao.nihao=<span class="string">&quot;&#123; backgroundColor: &#x27;red&#x27; &#125;&quot;</span>&gt;&lt;/A&gt;</span><br><span class="line"></span><br><span class="line"><span class="built_in">type</span> Tdir = &#123;</span><br><span class="line">  backgroundColor:string</span><br><span class="line">&#125;</span><br><span class="line">const VMove: Directive = &#123;</span><br><span class="line">  mounted(el:HTMLElement, binding: DirectiveBinding&lt;Tdir&gt;, vnode, prevVnode)&#123;</span><br><span class="line">    console.log(<span class="string">&#x27;beforeMount&#x27;</span>, el, binding, vnode, prevVnode );</span><br><span class="line">    el.style.backgroundColor = binding.value.backgroundColor</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="函数简写"><a href="#函数简写" class="headerlink" title="函数简写"></a>函数简写</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const VMove: Directive = (el: HTMLElement, binding: DirectiveBinding&lt;Tdir&gt;, vnode, prevVnode) =&gt; &#123;</span><br><span class="line">  console.log(<span class="string">&#x27;beforeMount&#x27;</span>, el, binding, vnode, prevVnode);</span><br><span class="line">  el.style.backgroundColor = binding.value.backgroundColor</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="自定义Hooks"><a href="#自定义Hooks" class="headerlink" title="自定义Hooks"></a>自定义Hooks</h2><p>相当于vue2的 mixin。</p>
<p><strong>vueUse</strong> 一个优秀的 vue hooks 库。</p>
<h2 id="全局函数和变量"><a href="#全局函数和变量" class="headerlink" title="全局函数和变量"></a>全局函数和变量</h2><p>vue2是通过 prototype属性</p>
<p>vue3是通过 <code>createApp().config.globalProperties.xxx</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span> Filter = &#123;</span><br><span class="line">    format&lt;T&gt;(str:string):string</span><br><span class="line">&#125;</span><br><span class="line">// 声明文件来 解决编译器报错</span><br><span class="line"><span class="built_in">declare</span> module <span class="string">&#x27;vue&#x27;</span>&#123;</span><br><span class="line">    <span class="built_in">export</span> interface ComponentCustomProperties &#123;</span><br><span class="line">        <span class="variable">$filters</span>: Filter</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">// 简单的过滤器</span><br><span class="line">app.config.globalProperties.<span class="variable">$filters</span> = &#123;</span><br><span class="line">    format&lt;T&gt;(str:string)&#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="string">&#x27;刘潇&#x27;</span> + str</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用的话： </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const app = getCurrentInstance()</span><br><span class="line">console.log(app?.proxy?.<span class="variable">$filters</span>.format(<span class="string">&#x27;卡卡洛特&#x27;</span>));</span><br></pre></td></tr></table></figure>

<h2 id="编写vue3插件"><a href="#编写vue3插件" class="headerlink" title="编写vue3插件"></a>编写vue3插件</h2><p>vue插件注册就通过<code>app.use(xx)</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import <span class="built_in">type</span> &#123; App, VNode ]from <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">import Loading from <span class="string">&#x27;./index.vue&#x27;</span></span><br><span class="line">import &#123; createVNode, render &#125; from <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="built_in">export</span> default &#123;</span><br><span class="line">    install(app: App) (const Vnode: VNode = createVNode(Loading)&#123;</span><br><span class="line">        render(Vnode, document.body)</span><br><span class="line">        app.config.globalProperties.<span class="variable">$loading</span> = (&#123;</span><br><span class="line">            show: Vnode.component?.exposed?.show,</span><br><span class="line">            hide: Vnode.component?.exposed?.hide</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 声明文件</span><br><span class="line"></span><br><span class="line"><span class="built_in">type</span> Lod = &#123;</span><br><span class="line">    show: ()=&gt;void</span><br><span class="line">    hide: ()=&gt;void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">declare</span> module <span class="string">&#x27;@vue/runtime-core&#x27;</span> &#123;</span><br><span class="line">    <span class="built_in">export</span> interface ComponentCustomProperties &#123;</span><br><span class="line">        <span class="variable">$loading</span>: Lod</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="setup选项"><a href="#setup选项" class="headerlink" title="setup选项"></a>setup选项</h1><p>接受props、context两个参数，return暴露属性、计算属性、周期等用于组件任何地方。</p>
<h2 id="props"><a href="#props" class="headerlink" title="props"></a>props</h2><p>props解构会消除响应式，如果要结构可以使用<code>toRefs</code>来进行解构</p>
<h2 id="context"><a href="#context" class="headerlink" title="context"></a>context</h2><p>普通非响应式js对象，暴露三个属性、方法。：<code>attrs slots emit</code></p>
<h1 id="pinia-js"><a href="#pinia-js" class="headerlink" title="pinia.js"></a>pinia.js</h1><p>一个全局状态管理工具。</p>
<p>有以下特性：</p>
<ol>
<li>ts支持</li>
<li>轻量</li>
<li>去除mutations， 只有state、getters、actions</li>
<li>actions支持同、异步</li>
<li>支持vue2\vue3</li>
</ol>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i pinia</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createPinia &#125; from <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line">app.use(createPinia)</span><br></pre></td></tr></table></figure>

<h2 id="建造和使用仓库"><a href="#建造和使用仓库" class="headerlink" title="建造和使用仓库"></a>建造和使用仓库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineStore &#125; from <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> const useState = defineStore(<span class="string">&#x27;main&#x27;</span>, &#123;</span><br><span class="line">    state: () =&gt; &#123;</span><br><span class="line">        <span class="built_in">return</span> &#123;</span><br><span class="line">            counter: 0,</span><br><span class="line">            name: <span class="string">&#x27;kakarotto&#x27;</span>,</span><br><span class="line">            isAdmin: <span class="literal">true</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    getters: &#123;</span><br><span class="line">        doubleCount: (state) =&gt; state.counter * 2,</span><br><span class="line">    &#125;,</span><br><span class="line">    actions: &#123;</span><br><span class="line">        <span class="function"><span class="title">increment</span></span>() &#123;</span><br><span class="line">            this.counter++</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">randomizeCounter</span></span>() &#123;</span><br><span class="line">            this.counter = Math.round(100 * Math.random())</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">changeName</span></span>()&#123;</span><br><span class="line">            this.name += <span class="string">&quot;刘&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// <span class="variable">$xx</span>.vue</span><br><span class="line"></span><br><span class="line">import &#123; useState &#125; from <span class="string">&#x27;../store&#x27;</span>;</span><br><span class="line">const mainStore = <span class="function"><span class="title">useState</span></span>()</span><br><span class="line"></span><br><span class="line">&#123;&#123; mainStore.doubleCount &#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="state"><a href="#state" class="headerlink" title="state"></a>state</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// 直接修改state</span><br><span class="line">const changeCounter1 = () =&gt;&#123;</span><br><span class="line">    mainStore.counter++</span><br><span class="line">&#125;</span><br><span class="line">// <span class="variable">$patch</span></span><br><span class="line">const changeCounter2 = () =&gt;&#123;</span><br><span class="line">    mainStore.<span class="variable">$patch</span>(&#123;</span><br><span class="line">        counter: 100</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">// <span class="variable">$patch</span>的工厂函数模式</span><br><span class="line">const changeCounter3 = () =&gt;&#123;</span><br><span class="line">    mainStore.<span class="variable">$patch</span>(state =&gt;&#123;</span><br><span class="line">        state.counter++</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">// <span class="variable">$state</span> 覆盖所有</span><br><span class="line">const changeCounter4 = () =&gt;&#123;</span><br><span class="line">    mainStore.<span class="variable">$state</span> = &#123;</span><br><span class="line">        counter:100,</span><br><span class="line">        name: <span class="string">&#x27;Vegeta&#x27;</span>,</span><br><span class="line">        isAdmin:<span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// actions提交</span><br><span class="line">const changeCounter5 = () =&gt;&#123;</span><br><span class="line">    mainStore.increment()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="解构store"><a href="#解构store" class="headerlink" title="解构store"></a>解构store</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import &#123; storeToRefs &#125; from <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"></span><br><span class="line">// 解构出来不是响应式的  使用 storeToRefs()变响应式</span><br><span class="line">const &#123; counter, name &#125; = storeToRefs(mainStore)</span><br></pre></td></tr></table></figure>

<h1 id="vue开发移动端"><a href="#vue开发移动端" class="headerlink" title="vue开发移动端"></a>vue开发移动端</h1><p>可以使用<code>postcss-px-to-viewport</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i postcss-px-to-viewport -D</span><br></pre></td></tr></table></figure>

<h1 id="unocss原子化"><a href="#unocss原子化" class="headerlink" title="unocss原子化"></a>unocss原子化</h1><ol>
<li>减少css体积、提高复用</li>
<li>减少起名复杂度</li>
<li>增加了记忆成本，class名必须记住前缀等</li>
</ol>
<h1 id="响应式原理"><a href="#响应式原理" class="headerlink" title="响应式原理"></a>响应式原理</h1><h1 id="散乱知识点"><a href="#散乱知识点" class="headerlink" title="散乱知识点"></a>散乱知识点</h1><h2 id="passive"><a href="#passive" class="headerlink" title=".passive"></a>.passive</h2><p>事件修饰符，一般用于触屏的滚动优化。 事件行为立即触发，而不是等待事件触发完成后触发。</p>
<h2 id="exact"><a href="#exact" class="headerlink" title=".exact"></a>.exact</h2><p>事件修饰符。允许控制所需的 确定目标组合按键修饰符。 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 当按下 Ctrl 时，即使同时按下 Alt 或 Shift 也会触发 --&gt;</span><br><span class="line">&lt;button @click.ctrl=<span class="string">&quot;onClick&quot;</span>&gt;A&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 仅当按下 Ctrl 且未按任何其他键时才会触发 --&gt;</span><br><span class="line">&lt;button @click.ctrl.exact=<span class="string">&quot;onCtrlClick&quot;</span>&gt;A&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<h2 id="textarea"><a href="#textarea" class="headerlink" title="textarea"></a>textarea</h2><p>多行文本域不支持<code>&#123;&#123;&#125;&#125;</code>, 必须使用<code>v-model</code>来进行赋值。</p>
<h2 id="watch更新时机"><a href="#watch更新时机" class="headerlink" title="watch更新时机"></a>watch更新时机</h2><p>更改了状态，可能同时触发回调和dom更新， 默认是在<strong>dom更新之前</strong>调用，如果想要更新后的dom的话，需要指明一个<code>flush:post</code>选项。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    key: &#123;</span><br><span class="line">      <span class="function"><span class="title">handler</span></span>() &#123;&#125;,</span><br><span class="line">      flush: <span class="string">&#x27;post&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h2 id="expose"><a href="#expose" class="headerlink" title="expose"></a>expose</h2><p>选项api，ref获取子组件实例时，进行限制子组件访问权限。 暴露出去特有的属性和方法。</p>
<h2 id="is-动态组件和原生htmlTags"><a href="#is-动态组件和原生htmlTags" class="headerlink" title="is:动态组件和原生htmlTags"></a>is:动态组件和原生htmlTags</h2><p>is用于原生html标签时， 必须加 <code>vue:</code>才可以被解析为vue文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;table&gt;</span><br><span class="line">    &lt;<span class="built_in">tr</span> is=<span class="string">&quot;vue:myComponent&quot;</span>&gt; &lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>

<h2 id="全局组件-1"><a href="#全局组件-1" class="headerlink" title="全局组件"></a>全局组件</h2><ol>
<li>无法在生产环境未被引入状态下，移除打包。</li>
<li>可维护性差</li>
<li>可以链式调用注册</li>
</ol>
<h2 id="inheritAttrs"><a href="#inheritAttrs" class="headerlink" title="inheritAttrs"></a>inheritAttrs</h2><p>开启这个选项禁用attrs,  后可以访问$attrs来选择传递的位置和元素。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">&quot;text&quot;</span> value=<span class="string">&quot;这是子组件的输入框&quot;</span> v-bind=<span class="string">&quot;<span class="variable">$attrs</span>&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="v-once"><a href="#v-once" class="headerlink" title="v-once"></a>v-once</h2><p>静态组件只需要更新一次，可以使用v-once! <strong>不推荐使用，维护性差。</strong></p>
<h2 id="forceUpdate"><a href="#forceUpdate" class="headerlink" title="$forceUpdate"></a>$forceUpdate</h2><p>使用$forceUpdate进行强制更新。</p>
<h1 id="小知识"><a href="#小知识" class="headerlink" title="小知识"></a>小知识</h1><p>快速查看控制台属性和一些变量 可以通过 控制台设置 &#x3D;&gt; 启用自定义格式设置工具</p>
<h2 id="unplugin-vue-components-自动引入"><a href="#unplugin-vue-components-自动引入" class="headerlink" title="unplugin-vue-components(自动引入)"></a>unplugin-vue-components(自动引入)</h2><h2 id="组件UI库"><a href="#组件UI库" class="headerlink" title="组件UI库"></a>组件UI库</h2><ol>
<li>ElementUI-plus</li>
<li>AntDesigion</li>
<li>Iview</li>
<li>Vant</li>
</ol>
<h2 id="样式穿透"><a href="#样式穿透" class="headerlink" title="样式穿透"></a>样式穿透</h2><p>scoped代码原理是： </p>
<ol>
<li>给DOM节点增加一个 hash生成的唯一标识</li>
<li>css选择器末尾增加一个当前组件hash选择器</li>
<li>包含组件时，只会给最外层增加 data-v-xxx 的标识符</li>
</ol>
<p>解决:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">:deep(.querySelector)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="tailWindCss"><a href="#tailWindCss" class="headerlink" title="tailWindCss"></a>tailWindCss</h2><p>使用class类名来进行排版的</p>
<h2 id="nextTick"><a href="#nextTick" class="headerlink" title="nextTick"></a>nextTick</h2><p>两种用法：</p>
<ol>
<li>传入callback</li>
<li>async await</li>
</ol>
<h1 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h1><h2 id="瀑布流组件"><a href="#瀑布流组件" class="headerlink" title="瀑布流组件"></a>瀑布流组件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">// 父组件数据</span><br><span class="line"></span><br><span class="line">const list = [</span><br><span class="line">  &#123;</span><br><span class="line">    height: 300,</span><br><span class="line">    bgc: <span class="string">&#x27;red&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">// 子组件模板</span><br><span class="line">&lt;div class=<span class="string">&quot;item&quot;</span></span><br><span class="line">      :style=<span class="string">&quot;&#123; height: item.height + &#x27;px&#x27;, top: item.top + &#x27;px&#x27;, left: item.left + &#x27;px&#x27;, backgroundColor: item.bgc &#125;&quot;</span></span><br><span class="line">      v-for=<span class="string">&quot;(item, index) in waterList&quot;</span> :key=<span class="string">&quot;index&quot;</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">// 子组件js</span><br><span class="line"><span class="built_in">type</span> listItem = &#123;</span><br><span class="line">    height: number</span><br><span class="line">    bgc: string</span><br><span class="line">    top?: number</span><br><span class="line">    left?: number</span><br><span class="line">&#125;</span><br><span class="line">const props = defineProps&lt;&#123;</span><br><span class="line">    list: listItem[]</span><br><span class="line">&#125;&gt;()</span><br><span class="line"></span><br><span class="line">const waterList = reactive&lt;listItem[]&gt;([])</span><br><span class="line">const heightList: number[] = []</span><br><span class="line"></span><br><span class="line">const init = () =&gt; &#123;</span><br><span class="line">    const width = 130</span><br><span class="line">    const screenX = document.body.clientWidth</span><br><span class="line">    const column = Math.floor(screenX / width)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">let</span> i = 0; i &lt; props.list.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; column) &#123;</span><br><span class="line">            waterList.push(&#123;</span><br><span class="line">                ...props.list[i],</span><br><span class="line">                left: i * width,</span><br><span class="line">                top: 20</span><br><span class="line">            &#125;)</span><br><span class="line">            heightList.push(props.list[i].height)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">let</span> current = heightList[0]</span><br><span class="line">            <span class="built_in">let</span> index = 0</span><br><span class="line">            heightList.forEach((h, i) =&gt; &#123;</span><br><span class="line">                if (current &gt; h) &#123;</span><br><span class="line">                    current = h</span><br><span class="line">                    index = i</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            heightList[index] += props.list[i].height + <span class="number">20</span></span><br><span class="line">            waterList.push(&#123;</span><br><span class="line">                ...props.list[i],</span><br><span class="line">                left: index * width,</span><br><span class="line">                top: <span class="number">20</span> + current</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    console.log(waterList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="按钮鉴权"><a href="#按钮鉴权" class="headerlink" title="按钮鉴权"></a>按钮鉴权</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;button v-is-show=<span class="string">&quot;&#x27;create&#x27;&quot;</span>&gt;创建&lt;/button&gt;</span><br><span class="line">&lt;button v-is-show=<span class="string">&quot;&#x27;edit&#x27;&quot;</span>&gt;编辑&lt;/button&gt;</span><br><span class="line">&lt;button v-is-show=<span class="string">&quot;&#x27;delete&#x27;&quot;</span>&gt;删除&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">var permisstion = [</span><br><span class="line">  <span class="string">&#x27;create&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;edit&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;delete&#x27;</span></span><br><span class="line">]</span><br><span class="line">const VIsShow: Directive&lt;HTMLButtonElement,string&gt; = (el, binding) =&gt; &#123;</span><br><span class="line">  console.log(el, binding);</span><br><span class="line">  <span class="keyword">if</span>(!permisstion.includes(binding.value))&#123;</span><br><span class="line">    el.style.display = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://movelovemovelove.github.io">kaka</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://movelovemovelove.github.io/2023/06/03/vue3/">http://movelovemovelove.github.io/2023/06/03/vue3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://movelovemovelove.github.io" target="_blank">码农必须冷静</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/vue/">vue</a></div><div class="post_share"><div class="social-share" data-image="/img/portial.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/06/03/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98/" title="浏览器缓存"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">浏览器缓存</div></div></a></div><div class="next-post pull-right"><a href="/2023/06/03/hello-world/" title="Hello World"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Hello World</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/portial.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">kaka</div><div class="author-info__description">vue2\vue3\react\angular\electron..都听过</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/MovelOvemoVelovE"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/movelovemovelove" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:MovelOvemoVelovE@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">菜鸡笔记</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#vue3%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">1.</span> <span class="toc-text">vue3新特性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%86%99%E4%BA%86%E6%95%B0%E6%8D%AE%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A"><span class="toc-number">1.1.</span> <span class="toc-text">重写了数据双向绑定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%98%E5%8C%96Vdom"><span class="toc-number">1.2.</span> <span class="toc-text">优化Vdom</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fragment"><span class="toc-number">1.3.</span> <span class="toc-text">fragment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setup%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="toc-number">1.4.</span> <span class="toc-text">setup语法糖</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">2.</span> <span class="toc-text">环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#nvm-amp-amp-nrm"><span class="toc-number">2.1.</span> <span class="toc-text">nvm &amp;&amp; nrm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA"><span class="toc-number">2.2.</span> <span class="toc-text">搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8vite%E6%90%AD%E5%BB%BA%E3%80%82"><span class="toc-number">2.2.0.1.</span> <span class="toc-text">使用vite搭建。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue-x2F-cli"><span class="toc-number">2.2.0.2.</span> <span class="toc-text">vue&#x2F;cli</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#node-js-%E6%BA%90%E7%A0%81"><span class="toc-number">2.2.0.3.</span> <span class="toc-text">node.js 源码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vite%E7%9B%AE%E5%BD%95-amp-amp-vscode%E6%8F%92%E4%BB%B6"><span class="toc-number">2.3.</span> <span class="toc-text">vite目录 &amp;&amp; vscode插件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">语法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4"><span class="toc-number">3.1.</span> <span class="toc-text">指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E6%8B%9Fdom-amp-amp-diff%E7%AE%97%E6%B3%95"><span class="toc-number">3.2.</span> <span class="toc-text">虚拟dom &amp;&amp; ?diff算法?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ref%E5%85%A8%E5%AE%B6%E6%A1%B6"><span class="toc-number">3.3.</span> <span class="toc-text">Ref全家桶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ref"><span class="toc-number">3.3.0.1.</span> <span class="toc-text">ref</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#isRef"><span class="toc-number">3.3.0.2.</span> <span class="toc-text">isRef</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#shallowRef"><span class="toc-number">3.3.0.3.</span> <span class="toc-text">shallowRef</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#triggerRef"><span class="toc-number">3.3.0.4.</span> <span class="toc-text">triggerRef</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#customRef"><span class="toc-number">3.3.0.5.</span> <span class="toc-text">customRef</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ref%E8%BF%98%E6%98%AF%E5%8F%AF%E4%BB%A5%E8%8E%B7%E5%8F%96dom"><span class="toc-number">3.3.0.6.</span> <span class="toc-text">ref还是可以获取dom</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BA%90%E7%A0%81"><span class="toc-number">3.3.0.7.</span> <span class="toc-text">源码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reactive%E5%85%A8%E5%AE%B6%E6%A1%B6"><span class="toc-number">3.4.</span> <span class="toc-text">reactive全家桶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#readonly"><span class="toc-number">3.4.0.1.</span> <span class="toc-text">readonly</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#shallowReactive"><span class="toc-number">3.4.0.2.</span> <span class="toc-text">shallowReactive</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#toXXX%E7%B3%BB%E5%88%97%E5%85%A8%E5%AE%B6%E6%A1%B6"><span class="toc-number">3.5.</span> <span class="toc-text">toXXX系列全家桶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#toRef"><span class="toc-number">3.5.0.1.</span> <span class="toc-text">toRef</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#toRefs"><span class="toc-number">3.5.0.2.</span> <span class="toc-text">toRefs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#toRaw"><span class="toc-number">3.5.0.3.</span> <span class="toc-text">toRaw</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#computed"><span class="toc-number">3.6.</span> <span class="toc-text">computed</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-number">3.7.</span> <span class="toc-text">侦听器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#watchEffect"><span class="toc-number">3.8.</span> <span class="toc-text">watchEffect</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">3.9.</span> <span class="toc-text">生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82"><span class="toc-number">3.10.</span> <span class="toc-text">父子组件传参</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#defineProps-%E7%88%B6-x3D-gt-%E5%AD%90"><span class="toc-number">3.10.0.1.</span> <span class="toc-text">defineProps(父&#x3D;&gt;子)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#defineEmits-%E5%AD%90-x3D-gt-%E7%88%B6"><span class="toc-number">3.10.0.2.</span> <span class="toc-text">defineEmits(子 &#x3D;&gt;父)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#defineExpose-%E5%AD%90-x3D-gt-%E7%88%B6"><span class="toc-number">3.10.0.3.</span> <span class="toc-text">defineExpose(子 &#x3D;&gt; 父)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6"><span class="toc-number">3.11.</span> <span class="toc-text">组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6"><span class="toc-number">3.11.0.1.</span> <span class="toc-text">全局组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E7%BB%84%E4%BB%B6"><span class="toc-number">3.11.0.2.</span> <span class="toc-text">递归组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">3.11.0.3.</span> <span class="toc-text">动态组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%A6%E7%B1%BB%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">3.11.0.4.</span> <span class="toc-text">另类动态组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">3.11.0.5.</span> <span class="toc-text">性能优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E6%A7%BD"><span class="toc-number">3.11.0.6.</span> <span class="toc-text">插槽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5suspense"><span class="toc-number">3.11.0.7.</span> <span class="toc-text">异步suspense</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#teleport-%E4%BC%A0%E9%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">3.11.0.8.</span> <span class="toc-text">teleport 传送组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#keep-alive%E7%BB%84%E4%BB%B6"><span class="toc-number">3.11.0.9.</span> <span class="toc-text">keep-alive组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">3.11.0.10.</span> <span class="toc-text">新的生命周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#provide-inject"><span class="toc-number">3.11.0.11.</span> <span class="toc-text">provide-inject</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%84%E5%BC%9F%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82-bus"><span class="toc-number">3.11.0.12.</span> <span class="toc-text">兄弟组件传参 bus</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mitt-vue3%E7%9A%84bus%E6%80%BB%E7%BA%BF%E5%BA%93"><span class="toc-number">3.11.0.13.</span> <span class="toc-text">mitt(vue3的bus总线库)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TSX"><span class="toc-number">3.12.</span> <span class="toc-text">TSX</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E8%BF%94%E5%9B%9E%E5%87%BD%E6%95%B0"><span class="toc-number">3.12.0.1.</span> <span class="toc-text">第一种返回函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5defineComponent%E9%80%89%E9%A1%B9api"><span class="toc-number">3.12.0.2.</span> <span class="toc-text">引入defineComponent选项api</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5defineComponent%E4%BD%BF%E7%94%A8setup"><span class="toc-number">3.12.0.3.</span> <span class="toc-text">引入defineComponent使用setup</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#v-model"><span class="toc-number">3.13.</span> <span class="toc-text">v-model</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-number">3.14.</span> <span class="toc-text">自定义指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vue2%E5%92%8C3%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.14.0.1.</span> <span class="toc-text">vue2和3的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%AE%80%E5%86%99"><span class="toc-number">3.14.0.2.</span> <span class="toc-text">函数简写</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89Hooks"><span class="toc-number">3.15.</span> <span class="toc-text">自定义Hooks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%87%BD%E6%95%B0%E5%92%8C%E5%8F%98%E9%87%8F"><span class="toc-number">3.16.</span> <span class="toc-text">全局函数和变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E5%86%99vue3%E6%8F%92%E4%BB%B6"><span class="toc-number">3.17.</span> <span class="toc-text">编写vue3插件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#setup%E9%80%89%E9%A1%B9"><span class="toc-number">4.</span> <span class="toc-text">setup选项</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#props"><span class="toc-number">4.1.</span> <span class="toc-text">props</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#context"><span class="toc-number">4.2.</span> <span class="toc-text">context</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#pinia-js"><span class="toc-number">5.</span> <span class="toc-text">pinia.js</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">5.1.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E9%80%A0%E5%92%8C%E4%BD%BF%E7%94%A8%E4%BB%93%E5%BA%93"><span class="toc-number">5.2.</span> <span class="toc-text">建造和使用仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#state"><span class="toc-number">5.3.</span> <span class="toc-text">state</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84store"><span class="toc-number">5.4.</span> <span class="toc-text">解构store</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue%E5%BC%80%E5%8F%91%E7%A7%BB%E5%8A%A8%E7%AB%AF"><span class="toc-number">6.</span> <span class="toc-text">vue开发移动端</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#unocss%E5%8E%9F%E5%AD%90%E5%8C%96"><span class="toc-number">7.</span> <span class="toc-text">unocss原子化</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86"><span class="toc-number">8.</span> <span class="toc-text">响应式原理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%A3%E4%B9%B1%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">9.</span> <span class="toc-text">散乱知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#passive"><span class="toc-number">9.1.</span> <span class="toc-text">.passive</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#exact"><span class="toc-number">9.2.</span> <span class="toc-text">.exact</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#textarea"><span class="toc-number">9.3.</span> <span class="toc-text">textarea</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#watch%E6%9B%B4%E6%96%B0%E6%97%B6%E6%9C%BA"><span class="toc-number">9.4.</span> <span class="toc-text">watch更新时机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#expose"><span class="toc-number">9.5.</span> <span class="toc-text">expose</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#is-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6%E5%92%8C%E5%8E%9F%E7%94%9FhtmlTags"><span class="toc-number">9.6.</span> <span class="toc-text">is:动态组件和原生htmlTags</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6-1"><span class="toc-number">9.7.</span> <span class="toc-text">全局组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#inheritAttrs"><span class="toc-number">9.8.</span> <span class="toc-text">inheritAttrs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#v-once"><span class="toc-number">9.9.</span> <span class="toc-text">v-once</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#forceUpdate"><span class="toc-number">9.10.</span> <span class="toc-text">$forceUpdate</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%8F%E7%9F%A5%E8%AF%86"><span class="toc-number">10.</span> <span class="toc-text">小知识</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#unplugin-vue-components-%E8%87%AA%E5%8A%A8%E5%BC%95%E5%85%A5"><span class="toc-number">10.1.</span> <span class="toc-text">unplugin-vue-components(自动引入)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6UI%E5%BA%93"><span class="toc-number">10.2.</span> <span class="toc-text">组件UI库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F%E7%A9%BF%E9%80%8F"><span class="toc-number">10.3.</span> <span class="toc-text">样式穿透</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tailWindCss"><span class="toc-number">10.4.</span> <span class="toc-text">tailWindCss</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nextTick"><span class="toc-number">10.5.</span> <span class="toc-text">nextTick</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#demo"><span class="toc-number">11.</span> <span class="toc-text">demo</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%80%91%E5%B8%83%E6%B5%81%E7%BB%84%E4%BB%B6"><span class="toc-number">11.1.</span> <span class="toc-text">瀑布流组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%89%E9%92%AE%E9%89%B4%E6%9D%83"><span class="toc-number">11.2.</span> <span class="toc-text">按钮鉴权</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/06/react%E6%A0%B7%E5%BC%8F%E7%A7%81%E6%9C%89%E5%8C%96/" title="react样式私有化">react样式私有化</a><time datetime="2023-06-06T02:37:07.000Z" title="发表于 2023-06-06 10:37:07">2023-06-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/06/react%E8%84%9A%E6%89%8B%E6%9E%B6%E6%90%AD%E5%BB%BA/" title="react脚手架搭建">react脚手架搭建</a><time datetime="2023-06-06T02:36:19.000Z" title="发表于 2023-06-06 10:36:19">2023-06-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/05/call-apply-bind/" title="call-apply-bind三者区别">call-apply-bind三者区别</a><time datetime="2023-06-05T02:08:34.000Z" title="发表于 2023-06-05 10:08:34">2023-06-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/05/mockjs/" title="mockjs">mockjs</a><time datetime="2023-06-05T02:08:34.000Z" title="发表于 2023-06-05 10:08:34">2023-06-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/05/fetch/" title="初识fetch">初识fetch</a><time datetime="2023-06-05T01:32:42.000Z" title="发表于 2023-06-05 09:32:42">2023-06-05</time></div></div></div></div></div></div></main><footer id="footer" style="background: linear-gradient(135deg,#92FFC0 10%,#002661 100%);"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By kaka</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><div class="js-pjax"></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>